## ReadWriteLock

- ReadWriteLock은 읽기 작업과 쓰기 작업을 위해 연관된 두 개의 락(읽기 락, 쓰기 락)을 유지하는 인터페이스이다.
- 일반적으로 락은 데이터를 조작하는 하나의 스레드의 임계영역을 보호하는 장치, 데이터를 읽는 작업만 실행되는 영역은 동시성 문제가 발생하지 않는다. (동시성은 발생함.)
- 읽기 작업이 많고 쓰기 작업이 적은 영역을 효율적으로 처리하기 위해 다수의 읽기와 하나의 쓰기를 읽기락과 쓰기락으로 구분해서 락을 운용하는 것이 필요하다.

### 특징

- 성능 개선
  - 상호 배타적인 락을 사용하는 것보다 데이터에 대한 동시 액세스를 허용하므로 동시성이 높아진다. (동시성 문제와는 별개)
  - 쓰기보다 읽기 작업이 빈번한 경우 효과적
- 메모리 동기화 (가시성)
  - 읽기 락 작업은 다른 읽기 락 작업과 상호 작용을 하는게 아니기 때문에, 스레드 간 동시에 읽기 작업을 하더라도 메모리의 가시성에 아무런 문제가 없다.
  - 쓰기 락 작업은 읽기 작업 및 다른 쓰기 작업과의 메모리 동기화를 보장해야한다. 즉 스레드가 쓰기 락을 해제하고, 다른 스레드가 읽기 락을 얻었을때 이전 쓰기 작업의 업데이트를 볼 수 있어야함
- 사용기준
  - 읽기/쓰기 락의 사용은 데이터가 읽히는 빈도와 수정되는 빈도, 읽기 및 쓰기 작업의 지속 시간, 데이터에 대한 경합(동시에 데이터를 읽거나 쓰려는 스레드 수)에 따라 결정된다.
  - 수정은 드물게 일어나고 검색은 빈번히 발생한다면 읽기/쓰기 락의 사용에 적합한 이상적인 후보라 할 수 있겠지만, 업데이트가 빈번해지면, 데이터가 대부분 배타적으로 작동한다.
  - 읽기 작업 시간이 긴 경우 여러 스레드들이 경합없이 모두 읽는 이점이 있으나 너무 짧은 경우 읽기/쓰기 락 구현의 오버헤드 (읽기 작업과 쓰기 작업의 상태를 계속 확인하기 때문에, 상호 배제 락보다 알고리즘이 더 복잡)가 증가하기 때문에 효율성이 떨어진다.